@model List<AtivoModel>
@{
  ViewData["Title"] = "Listagem de Ativos";
}

@if (TempData["Erro"] != null)
  {
    <div class="alert alert-danger alert-dismissible fade show" data-bs-dismiss="alert" role="alert">
      @TempData["Erro"]
      <button type="button" class="btn-close" aria-label="Close"></button>
    </div>
  }

@if (TempData["Sucesso"] != null)
  {
    <div class="alert alert-success alert-dismissible fade show" data-bs-dismiss="alert" role="alert">
      @TempData["Sucesso"]
      <button type="button" class="btn-close" aria-label="Close"></button>
    </div>
  }

<main>
   <h2>@ViewData["Title"]</h2>

   <table class="table data-table display">
      <thead>
      <tr>
         <th scope="col">#</th>
         <th scope="col">Ticker</th>
         <th scope="col">Cotas</th>
         <th scope="col">Tipo</th>
         <th scope="col">Setor</th>
         <th scope="col">Valor Total</th>
         <th scope="col"></th>
      </tr>
   </thead>
   <tbody>
    @if(Model != null && Model.Any())
    {
        foreach (AtivoModel ativo in Model)
        {
          <tr>
            <th scope="row">@ativo.Id</th>
            <td>@ativo.Ticker</td>
            <td>@ativo.Cotas</td>
            <td>@(ativo.Tipo == "stock" || ativo.Tipo == "bdr" ? "Ação" : "FII")</td>
            <td>@ativo.Setor</td>
            <td>R$ @ativo.ValorTotal</td>
            <td>
              <div class="btn-group" role="group" aria-label="Basic example">
                <a type="button" class="btn btn-primary" asp-route-ativoId="@ativo.Id" asp-controller="Ativo" asp-action="Editar">Editar</a>
                <a type="button" class="btn btn-danger btn-confirmar-deletar" asp-route-ativoId="@ativo.Id" asp-controller="Ativo" asp-action="ApagarConfirmacao">Apagar</a>
              </div>
            </td>
          </tr>
      }
    }
   </tbody>
   </table>
</main>
<br>

@* Modal de confirmação de deleção *@
<div id="modalDeletarAtivo" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      @* Resultado vem via Ajax *@
    </div>
  </div>
</div>

@* Foi feito propositalmente sem JQuery, somente com JavaScript para fins didáticos.
Sei que isso é uma má prática. Mas devido as circunstâncias e objetivos não vi problema.*@
<dialog id="modalEscolhaNegociacaoAtivo">
  <table class="table data-table display">
      <thead>
      <tr>
         <th scope="col">#</th>
         <th scope="col">Ticker</th>
         <th scope="col">Cotas</th>
         <th scope="col">Valor Total</th>
         <th scope="col"></th>
      </tr>
   </thead>
   <tbody>
    @if(Model != null && Model.Any())
    {
        foreach (AtivoModel ativo in Model)
        {
          <tr>
            <th scope="row">@ativo.Id</th>
            <td>@ativo.Ticker</td>
            <td>@ativo.Cotas</td>
            <td>R$ @ativo.ValorTotal</td>
            <td>
              <div class="btn-group" role="group" aria-label="Basic example">
                <a type="button" class="btn btn-primary" asp-route-ativoId="@ativo.Id" asp-controller="Ativo" asp-action="NegociarAtivo">Negociar</a>
              </div>
            </td>
          </tr>
      }
    }
   </tbody>
   </table>
</dialog>

<a class="btn-index-ativo btn btn-primary btn-block" role="button" asp-controller="Ativo" asp-action="Criar">Adicionar novo ativo</a>
<button id="ativaModalNegociar" class="btn-index-ativo btn btn-primary btn-block" role="button">Negociar ativo</button>